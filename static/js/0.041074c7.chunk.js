(this.webpackJsonprebuild=this.webpackJsonprebuild||[]).push([[0],{266:function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return c});var h=n(15),f=n(18),a=n(22),O=n(0),w=n(11),x=n(100),p=n(3),m=a.ethers.constants.Zero,g={bond:m,want:m,I:{bond:"",want:""},old:{bond:"",want:""}},v=function(t,e){return a.ethers.utils.formatUnits(t,e||18)},y=function(t,e){return a.ethers.utils.parseUnits(t||"0",e||18)};function c(){Object(O.useContext)(w.e).state.controller;var t=Object(O.useContext)(w.f),e=t.liteState,n=e.pool,a=e.bond,c=e.want,o=(e.coll,e.data),i=t.classesChild,s=t.handleClick,t=Object(O.useReducer)(function(t,e){return Object(h.a)(Object(h.a)({},t),e)},g),t=Object(f.a)(t,2),b=t[0],l=t[1],t=Object(O.useState)(!0),t=Object(f.a)(t,2),r=t[0],d=t[1],t=Object(O.useState)(""),t=Object(f.a)(t,2),j=t[0],u=t[1];return Object(O.useEffect)(function(){return b==g||l(g)},[n]),Object(O.useEffect)(function(){var e=y(b.I.bond),t=y(b.I.want);e.eq(b.bond)?t.eq(b.want)||l({bond:t,want:t,I:Object(h.a)(Object(h.a)({},b.I),{},{bond:v(t)})}):n.ct.get_dy(e).then(function(t){u(""),l({bond:e,want:t,I:Object(h.a)(Object(h.a)({},b.I),{},{want:v(t)})})}).catch(function(){b.I.bond.length>b.old.bond.length&&b.I.bond.length<v(b.bond).length&&u("insufficient")})},[b.I]),Object(O.useMemo)(function(){return Object(p.jsxs)("div",{className:i.root,children:[Object(p.jsxs)("div",{className:i.amount,children:[Object(p.jsx)("div",{children:r?Object(p.jsx)(x.a,{title:"bond",State:{state:b,setState:l,token:a,max:o.balance.bond,if_max:o.allowance.bond.gt("100000000000000000000000000000000")},style:{height:"90px"}}):Object(p.jsx)(x.a,{title:"want",State:{state:b,setState:l,token:c,max:o.balance.want,if_max:o.allowance.want.gt("100000000000000000000000000000000")},style:{height:"90px"}})}),Object(p.jsx)("span",{className:i.icon,onClick:function(){d(!r),l(g)},children:"swap_horiz"}),r?Object(p.jsx)(x.b,{title:"want",state:{state:b,token:c,max:o.balance.want},style:{height:"90px"}}):Object(p.jsx)(x.b,{title:"bond",state:{state:b,token:a,max:o.balance.bond},style:{height:"90px"}})]}),Object(p.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(p.jsx)("div",{style:{fontFamily:"Helvetica",fontSize:"14px",color:"red"},children:j}),Object(p.jsx)(x.c,{apy:parseFloat(o.apy).toPrecision(3),info:"APY is the fixed-rate lending interest received by \n          lender. This is the total cost for the 2-year-duration\n          loan. When lender exits before the expiry date, the\n          interest earned for the remainder of the loan at that\n          moment will be deducted in COLLAR.\n          "})]}),Object(p.jsx)("div",{className:i.buttonOne,children:r?Object(p.jsxs)("div",{children:[Object(p.jsx)(x.f,{name:"Approve",onClick:function(){return s("approve")(a)},disabled:o.allowance.bond.gt("100000000000000000000000000000000")}),Object(p.jsx)(x.f,{name:"Borrow",onClick:function(){return s("borrow")(b.bond,b.want).then(function(){return l({I:{bond:"",want:""}})})},disabled:m.eq(b.want)||y(b.I.bond).gt(o.balance.bond)||!y(b.I.bond).eq(b.bond)})]}):Object(p.jsxs)("div",{children:[Object(p.jsx)(x.f,{name:"Approve",onClick:function(){return s("approve")(c)},disabled:o.allowance.want.gt("100000000000000000000000000000000")}),Object(p.jsx)(x.f,{name:"Repay",onClick:function(){return s("repay")(b.want).then(function(){return l({I:{bond:"",want:""}})})},disabled:m.eq(b.bond)||y(b.I.want).gt(o.balance.want)||!y(b.I.want).eq(b.want)})]})})]})},[b,o,r,j])}}}]);