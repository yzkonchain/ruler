(this.webpackJsonprebuild=this.webpackJsonprebuild||[]).push([[1],{267:function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return a});var j=n(15),f=n(18),l=n(22),w=n(0),x=n(11),O=n(100),p=n(3),g=l.ethers.constants.Zero,m={coll:g,want:g,I:{coll:"",want:""},old:{coll:"",want:""}},I=function(t,e){return l.ethers.utils.formatUnits(t,e||18)},y=function(t,e){return l.ethers.utils.parseUnits(t||"0",e||18)};function a(){var t=Object(w.useContext)(x.e).state,e=(t.signer,t.controller,Object(w.useContext)(x.f)),t=e.liteState,n=(t.bond,t.want),l=t.coll,a=t.pool,c=t.data,o=e.classesChild,i=e.handleClick,e=Object(w.useReducer)(function(t,e){return Object(j.a)(Object(j.a)({},t),e)},m),e=Object(f.a)(e,2),s=e[0],r=e[1],e=Object(w.useState)(!0),e=Object(f.a)(e,2),b=e[0],u=e[1],e=Object(w.useState)(""),e=Object(f.a)(e,2),d=e[0],h=e[1];return Object(w.useEffect)(function(){return s==m||r(m)},[a]),Object(w.useEffect)(function(){var e=y(s.I.coll),n=y(s.I.want);n.eq(s.want)?e.eq(s.coll)||a.ct.get_dy(e).then(function(t){h(""),r({coll:e,want:t,I:Object(j.a)(Object(j.a)({},s.I),{},{want:I(t)})})}).catch(function(){s.I.coll.length>s.old.coll.length&&s.I.coll.length<I(s.coll).length&&h("insufficient")}):a.ct.get_dx(n).then(function(t){h(""),r({coll:t,want:n,I:Object(j.a)(Object(j.a)({},s.I),{},{coll:I(t)})})}).catch(function(){s.I.want.length>s.old.want.length&&s.I.want.length<I(s.want).length&&h("insufficient")})},[s.I]),Object(w.useMemo)(function(){return Object(p.jsxs)("div",{className:o.root,children:[Object(p.jsxs)("div",{className:o.amount,children:[b?Object(p.jsx)(O.a,{title:"want",State:{state:s,setState:r,token:n,max:c.balance.want,if_max:c.allowance.want.gt("100000000000000000000000000000000")},style:{height:"90px"}}):Object(p.jsx)(O.a,{title:"coll",State:{state:s,setState:r,token:l,max:c.balance.coll,if_max:c.balance.coll.gt("0")},style:{height:"90px"}}),Object(p.jsx)("span",{className:o.icon,onClick:function(){u(!b),r(m)},children:"swap_horiz"}),b?Object(p.jsx)(O.b,{title:"coll",state:{state:s,token:l,max:c.balance.coll},style:{height:"90px"}}):Object(p.jsx)(O.b,{title:"want",state:{state:s,token:n,max:c.balance.want},style:{height:"90px"}})]}),Object(p.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(p.jsx)("div",{style:{fontFamily:"Helvetica",fontSize:"14px",color:"red"},children:d}),Object(p.jsx)(O.c,{apy:parseFloat(c.apy).toPrecision(3),info:"APY is the fixed-rate lending interest received by \n          lender. This is the total cost for the 2-year-duration\n          loan. When lender exits before the expiry date, the\n          interest earned for the remainder of the loan at that\n          moment will be deducted in COLLAR.\n          "})]}),Object(p.jsx)("div",{className:o.buttonOne,children:Object(p.jsxs)("div",{children:[Object(p.jsx)(O.f,{name:"Approve",onClick:function(){return i("approve")(n)},disabled:c.allowance.want.gt("100000000000000000000000000000000")}),b?Object(p.jsx)(O.f,{name:"Lend",onClick:function(){return i("lend")(s.want).then(function(){return r({I:{coll:"",want:""}})})},disabled:g.eq(s.coll)||y(s.I.want).gt(c.balance.want)||!y(s.I.want).eq(s.want)}):Object(p.jsx)(O.f,{name:"Exit",onClick:function(){return i("redeem")(s.coll).then(function(){return r({I:{coll:"",want:""}})})},disabled:g.eq(s.want)||y(s.I.coll).gt(c.balance.coll)||!y(s.I.coll).eq(s.coll)})]})})]})},[s,c])}}}]);