(this.webpackJsonprebuild=this.webpackJsonprebuild||[]).push([[1],{259:function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return c});var f=n(15),h=n(22),a=n(17),x=n(0),O=n(12),m=n(85),w=n(3),p=a.ethers.constants.Zero,g={coll:p,want:p,I:{coll:"",want:""},old:{coll:"",want:""}},y=function(t,e){return a.ethers.utils.formatUnits(t,e||18)},k=function(t,e){return a.ethers.utils.parseUnits(t||"0",e||18)};function c(){var t=Object(x.useContext)(O.d).state,e=(t.signer,t.controller,Object(x.useContext)(O.e)),t=e.liteState,n=(t.bond,t.want),a=t.coll,c=t.pool,l=t.data,i=e.classesChild,s=e.handleClick,e=Object(x.useReducer)(function(t,e){return Object(f.a)(Object(f.a)({},t),e)},g),e=Object(h.a)(e,2),o=e[0],r=e[1],e=Object(x.useState)(!0),e=Object(h.a)(e,2),d=e[0],u=e[1],e=Object(x.useState)(""),e=Object(h.a)(e,2),b=e[0],j=e[1];return Object(x.useEffect)(function(){return o==g||r(g)},[c]),Object(x.useEffect)(function(){var e=k(o.I.coll),n=k(o.I.want);n.eq(o.want)?e.eq(o.coll)||c.ct.get_dy(e).then(function(t){j(""),r({coll:e,want:t,I:Object(f.a)(Object(f.a)({},o.I),{},{want:y(t)})})}).catch(function(){j("Insufficient Liquidity"),r({coll:p,want:p})}):c.ct.get_dx(n).then(function(t){j(""),r({coll:t,want:n,I:Object(f.a)(Object(f.a)({},o.I),{},{coll:y(t)})})}).catch(function(){j("Insufficient Liquidity"),r({coll:p,want:p})})},[o.I]),Object(x.useMemo)(function(){return Object(w.jsxs)("div",{className:i.root,children:[Object(w.jsx)("div",{className:i.tip,style:{backgroundColor:"#DDC5C0",color:"#191919",padding:"10px",fontFamily:"Gillsans",marginTop:"5px"},children:Object(w.jsxs)("ul",{style:{lineHeight:"25px",paddingInlineStart:"20px",marginBlockStart:0,marginBlockEnd:0},children:[Object(w.jsx)("li",{children:O.k.Lend}),Object(w.jsx)("li",{children:O.k.fee})]})}),Object(w.jsxs)("div",{className:i.amount,children:[d?Object(w.jsx)(m.a,{title:"want",State:{state:o,setState:r,token:n,max:l.balance.want,if_max:l.balance.want.gt("0")},style:{height:"50PX"}}):Object(w.jsx)(m.a,{title:"coll",State:{state:o,setState:r,token:a,max:l.balance.coll,if_max:l.balance.coll.gt("0")},style:{height:"50PX"}}),Object(w.jsx)("span",{className:i.icon_arrow,onClick:function(){u(!d),r(g)},children:"swap_horiz"}),d?Object(w.jsx)(m.a,{title:"coll",State:{state:o,setState:r,token:a,max:l.balance.coll,if_max:l.balance.coll.gt("0")},style:{height:"50PX"}}):Object(w.jsx)(m.a,{title:"want",State:{state:o,setState:r,token:n,max:l.balance.want,if_max:l.balance.want.gt("0")},style:{height:"50PX"}})]}),Object(w.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(w.jsx)("div",{style:{fontFamily:"Helvetica",fontSize:"14px",color:"red"},children:b}),Object(w.jsx)(m.c,{apy:parseFloat(l.apy).toPrecision(3),info:"APY is the fixed-rate lending interest received by \n          lender. This is the total cost for the 2-year-duration\n          loan. When lender exits before the expiry date, the\n          interest earned for the remainder of the loan at that\n          moment will be deducted in COLLAR.\n          "})]}),Object(w.jsx)("div",{className:i.button,children:Object(w.jsx)("div",{children:l.allowance.want.gt("100000000000000000000000000000000")||!c.ct.signer?d?Object(w.jsx)(m.f,{name:"Lend",onClick:function(){return s("lend")(o.want).then(function(){return r({I:{coll:"",want:""}})})},disabled:p.eq(o.coll)}):Object(w.jsx)(m.f,{name:"Exit",onClick:function(){return s("redeem")(o.coll).then(function(){return r({I:{coll:"",want:""}})})},disabled:p.eq(o.want)}):Object(w.jsx)(m.f,{name:"Approve",onClick:function(){return s("approve")(n)}})})})]})},[o,l,d,b])}}}]);